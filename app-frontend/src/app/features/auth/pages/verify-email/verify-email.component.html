<div class="auth-container">
  <div class="auth-card fade-in">
    <!-- Header with Email Icon -->
    <div class="auth-header">
      <div class="email-icon-container">
        <mat-icon class="email-icon">mark_email_read</mat-icon>
      </div>
      <h1 class="text-gradient">Verify Your Email</h1>
      <p class="text-gray-600">
        We've sent a 6-digit code to<br>
        <strong>{{ email }}</strong>
      </p>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage" class="alert alert-success" role="alert">
      <mat-icon>check_circle</mat-icon>
      <span>{{ successMessage }}</span>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-error" role="alert">
      <mat-icon>error</mat-icon>
      <span>{{ errorMessage }}</span>
    </div>

    <!-- OTP Form -->
    <form [formGroup]="verifyForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline" class="w-full otp-field">
        <mat-label>Enter 6-digit code</mat-label>
        <input
          matInput
          type="text"
          formControlName="otp"
          placeholder="000000"
          maxlength="6"
          autocomplete="one-time-code"
          (input)="onOtpInput($event)"
          class="text-center text-2xl tracking-widest"
        />
        <mat-error *ngIf="verifyForm.get('otp')?.invalid">
          Please enter a valid 6-digit code
        </mat-error>
      </mat-form-field>

      <!-- Verify Button -->
      <button
        mat-raised-button
        type="submit"
        class="w-full btn-gradient"
        [disabled]="loading || verifyForm.invalid"
      >
        <span *ngIf="!loading">Verify Email</span>
        <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
      </button>
    </form>

    <!-- Resend OTP Section -->
    <div class="resend-section">
      <p class="text-gray-600 text-sm">
        Didn't receive the code?
      </p>

      <button
        mat-button
        class="resend-btn"
        [disabled]="!canResend || resending"
        (click)="resendOtp()"
      >
        <mat-spinner *ngIf="resending" diameter="16" class="mr-2"></mat-spinner>
        <span *ngIf="!canResend && !resending">
          Resend in {{ getCountdownDisplay() }}
        </span>
        <span *ngIf="canResend && !resending">
          <mat-icon class="text-sm">refresh</mat-icon>
          Resend Code
        </span>
      </button>
    </div>

    <!-- Back to Register -->
    <div class="text-center mt-6">
      <a
        routerLink="/auth/register"
        class="text-purple-600 hover:text-purple-700 text-sm"
      >
        <mat-icon class="text-sm align-middle">arrow_back</mat-icon>
        Back to Registration
      </a>
    </div>
  </div>
</div>
